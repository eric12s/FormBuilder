{"version":3,"sources":["CreateTable.js","services/server_communication.js","SubmitPage.js","FormWizard.js","react-auth0-spa.js","index.js"],"names":["CreateTable","props","className","scope","forms","map","item","i","key","name","noSubmissions","to","baseUrl","readAll","axios","get","then","response","data","catch","error","console","log","read","id","create","form","post","patch","request","createImpl","formImpl","SubmitPage","useState","values","fields","handleValueChange","event","onSubmit","preventDefault","target","value","formName","Object","keys","type","inputType","onChange","withRouter","setFields","newLabel","setNewLabel","newName","setNewName","newInputType","setNewInputType","newFormName","setNewFormName","formId","setFormId","field","label","concat","class","Comms","setForms","history","push","DEFAULT_REDIRECT_CALLBACK","window","replaceState","document","title","location","pathname","Auth0Context","React","createContext","ReactDOM","render","children","onRedirectCallback","initOptions","isAuthenticated","setIsAuthenticated","user","setUser","auth0Client","setAuth0","loading","setLoading","popupOpen","setPopupOpen","useEffect","a","createAuth0Client","auth0FromHook","search","includes","handleRedirectCallback","appState","getUser","initAuth0","loginWithPopup","params","Provider","getIdTokenClaims","loginWithRedirect","getTokenSilently","getTokenWithPopup","logout","domain","config","client_id","clientId","redirect_uri","origin","targetUrl","padding","createBrowserHistory","addFormArr","useContext","onClick","style","path","match","_id","getElementById"],"mappings":"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","file":"static/js/main.94e7c5e8.chunk.js","sourcesContent":["//desiging the table\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\n\r\nconst CreateTable = (props) => {\r\n    const getTableRows = () => {\r\n        return props.forms.map((item, i) => {\r\n            return (\r\n                <tbody key={i}>\r\n                    <tr>\r\n                            <td>{i}</td>\r\n                            <td>{item.name}</td>\r\n                            <td>{item.noSubmissions}</td>\r\n                            <td><Link to={`/submit/${i}`}>View</Link></td>\r\n                            <td><Link to={`/submissions/${i}`}>View</Link></td>\r\n                    </tr>\r\n                </tbody>\r\n            )\r\n        })\r\n    }\r\n    \r\n    return (\r\n        <div className=\"table table-striped\">\r\n            <table>\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th scope=\"col\">Form Id </th>\r\n                        <th scope=\"col\">Form Name </th>\r\n                        <th scope=\"col\"># Submissions </th>\r\n                        <th scope=\"col\">Submit Page </th>\r\n                        <th scope=\"col\">Submissions Page </th>\r\n                    </tr>\r\n                </thead>\r\n                {getTableRows()}\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateTable","  \r\nimport axios from 'axios'\r\n\r\nconst baseUrl = 'https://form-builder-proj.herokuapp.com'\r\n\r\nfunction readAll() {\r\n  return (\r\n    axios.get(`${baseUrl}/forms`)\r\n      .then(response => response.data)\r\n      .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\nfunction read(id='') {\r\n    return (\r\n      axios.get(`${baseUrl}/forms/${id}`)\r\n        .then(response => response.data)\r\n        .catch(error => console.log(error))\r\n    )\r\n  }\r\n\r\nfunction create(form) {\r\n  return (\r\n    axios.post(`${baseUrl}/forms`, form)\r\n      .then(response => response.data)\r\n      // .catch(error => error)\r\n  )\r\n}\r\n\r\nfunction patch(form) {\r\n  console.log(form)\r\n  return (\r\n    axios.patch(`${baseUrl}/${form.id}`, form)\r\n      .then(request => request.data)\r\n      // .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\nfunction createImpl(formImpl){\r\n  return(\r\n    axios.post(`${baseUrl}/formImpls/`)\r\n    .then(response => response.data)\r\n    .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default {readAll, read, create, patch, createImpl}","import React, { useState } from 'react'\r\nimport Comms from './services/server_communication.js'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\n\r\nconst SubmitPage = (props) => {\r\n    const [values, setValues] = useState([''])\r\n    const [inputFields, setInputFields] = useState(props.fields)\r\n    const [count, setCount] = useState(0)\r\n    const formImpl = {}\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        console.log(event.target.value)\r\n        \r\n        const formImpl = {\r\n            id: 5,\r\n            name: \"dfsdf\",\r\n            phone: \"sdfdf\",\r\n            originId: props.id\r\n        }\r\n\r\n        // Comms.createImpl(formImpl)\r\n        // .then((formImpl) => {\r\n        //     console.log(formImpl)\r\n        // }).catch(error => console.log(error))   \r\n    }\r\n\r\n    const handleValueChange = (event) => {\r\n        //setValues(values[count]=event.target.value)\r\n    }\r\n    //adding key\r\n    return( \r\n        <form onSubmit={handleSubmit} className=\"container\">\r\n            <h1>{props.formName}</h1>\r\n                {Object.keys(props.fields).map((i) => {\r\n                    return (\r\n                        <div key={i}>\r\n                            {props.fields[i].name}<input type={props.fields[i].inputType} value={values[i]} onChange={handleValueChange}/>\r\n                        </div>\r\n                    )\r\n                })}\r\n                <button type=\"submit\" className=\"btn btn-primary\">Save</button>\r\n          </form>\r\n    )\r\n\r\n}\r\n\r\nexport default SubmitPage","import React, { useState } from 'react'\r\nimport {\r\n  withRouter\r\n} from 'react-router-dom'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport Comms from './services/server_communication.js'\r\n\r\nconst FormWizard = (props) => {\r\n  const [fields, setFields] = useState([])\r\n  //const [fieldSet, setSet] = useState(new Set())\r\n  const [newLabel, setNewLabel] = useState('')\r\n  const [newName, setNewName] = useState('')\r\n  const [newInputType, setNewInputType] = useState('')\r\n  const [newFormName, setNewFormName] = useState('')\r\n  const [formId, setFormId] = useState(1)\r\n\r\n  // useEffect(() => {\r\n  //     props.setForms(props.forms)\r\n  // }, [props.forms])\r\n\r\n  const addField = (event) => {\r\n    event.preventDefault() // Why? Ask Or\r\n    // if(fieldSet.has(newLabel))\r\n    //    return alert(`${newLabel} is already in exist`) ASK OR\r\n\r\n    const field = { name: newName, label: newLabel, inputType: newInputType || 'text' }\r\n    console.log(newLabel)\r\n    setFields(fields.concat(field))\r\n    //setSet(field.label)\r\n    setNewName('')\r\n    setNewLabel('')\r\n    setNewInputType('')\r\n  }\r\n\r\n  const addForm = (event) => {\r\n    event.preventDefault()\r\n    const form = {\r\n      name: newFormName,\r\n      fields: fields,\r\n      // id: formId,\r\n      noSubmissions: 0\r\n    }\r\n\r\n    Comms.create(form)\r\n      .then((form) => {\r\n        console.log(form)\r\n        props.setForms(props.forms.concat(form))\r\n      }).catch(error => console.log(error))\r\n    setNewFormName('')\r\n    setFields([])\r\n    setFormId(formId + 1)\r\n    props.history.push('/table')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleLabelChange = (event) => {\r\n    setNewLabel(event.target.value)\r\n  }\r\n  const handleInputTypeChange = (event) => {\r\n    setNewInputType(event.target.value)\r\n  }\r\n  const handleFormNameChange = (event) => {\r\n    setNewFormName(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Add new field</h1>\r\n      <form onSubmit={addField} className=\"container\">\r\n        <div class=\"form-group\">\r\n                    field label:<input  type=\"text\" value={newLabel} onChange={handleLabelChange}></input>\r\n                    input name:<input type=\"text\" value={newName} onChange={handleNameChange}></input>\r\n                    input type:<select value={newInputType} onChange={handleInputTypeChange}>\r\n            <option value=\"text\">text</option>\r\n            <option value=\"color\">color</option>\r\n            <option value=\"date\">date</option>\r\n            <option value=\"email\">email</option>\r\n            <option value=\"tel\">telephone</option>\r\n            <option value=\"number\">number</option>\r\n          </select>\r\n          <br></br>\r\n          <button type=\"submit\" className=\"btn btn-primary\">>Add Field</button>\r\n        </div>\r\n      </form>\r\n      <ul className=\"list-group\">\r\n        {fields.map((item, i) => <li key={i} class=\"list-group-item\">{item.label} {item.name} {item.inputType}</li>)}\r\n      </ul>\r\n      <br></br>\r\n      <form onSubmit={addForm}>\r\n        <div class=\"form-group\">\r\n                    Form Name:<input value={newFormName} onChange={handleFormNameChange}></input>\r\n          <br></br>\r\n          <button type=\"submit\" className=\"btn btn-success\">Save</button>\r\n        </div>\r\n      </form>            </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(FormWizard)","// src/react-auth0-spa.js\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\r\n\r\nconst DEFAULT_REDIRECT_CALLBACK = () =>\r\n  window.history.replaceState({}, document.title, window.location.pathname);\r\n\r\nexport const Auth0Context = React.createContext();\r\nexport const useAuth0 = () => useContext(Auth0Context);\r\nexport const Auth0Provider = ({\r\n  children,\r\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\r\n  ...initOptions\r\n}) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState();\r\n  const [user, setUser] = useState();\r\n  const [auth0Client, setAuth0] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initAuth0 = async () => {\r\n      const auth0FromHook = await createAuth0Client(initOptions);\r\n      setAuth0(auth0FromHook);\r\n\r\n      if (window.location.search.includes(\"code=\") &&\r\n          window.location.search.includes(\"state=\")) {\r\n        const { appState } = await auth0FromHook.handleRedirectCallback();\r\n        onRedirectCallback(appState);\r\n      }\r\n\r\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\r\n\r\n      setIsAuthenticated(isAuthenticated);\r\n\r\n      if (isAuthenticated) {\r\n        const user = await auth0FromHook.getUser();\r\n        setUser(user);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n    initAuth0();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const loginWithPopup = async (params = {}) => {\r\n    setPopupOpen(true);\r\n    try {\r\n      await auth0Client.loginWithPopup(params);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setPopupOpen(false);\r\n    }\r\n    const user = await auth0Client.getUser();\r\n    setUser(user);\r\n    setIsAuthenticated(true);\r\n  };\r\n\r\n  const handleRedirectCallback = async () => {\r\n    setLoading(true);\r\n    await auth0Client.handleRedirectCallback();\r\n    const user = await auth0Client.getUser();\r\n    setLoading(false);\r\n    setIsAuthenticated(true);\r\n    setUser(user);\r\n  };\r\n  return (\r\n    <Auth0Context.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        user,\r\n        loading,\r\n        popupOpen,\r\n        loginWithPopup,\r\n        handleRedirectCallback,\r\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\r\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\r\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\r\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\r\n        logout: (...p) => auth0Client.logout(...p)\r\n      }}\r\n    >\r\n      {children}\r\n    </Auth0Context.Provider>\r\n  );\r\n};","import React, { useState, useEffect } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route, Link\r\n} from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport CreateTable from './CreateTable.js'\r\nimport Comms from './services/server_communication.js'\r\nimport SubmitPage from './SubmitPage'\r\nimport FormWizard from './FormWizard'\r\nimport { useAuth0 } from \"./react-auth0-spa\"\r\nimport { Auth0Provider } from \"./react-auth0-spa\";\r\nimport config from \"./auth_config.json\";\r\nimport history from \"./utils/history\";\r\n\r\n\r\nconst onRedirectCallback = appState => {\r\n  history.push(\r\n    appState && appState.targetUrl\r\n      ? appState.targetUrl\r\n      : window.location.pathname\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  const [forms, setForms] = useState([])\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    Comms.readAll()\r\n      .then((forms) => {\r\n        setForms(forms)\r\n      })\r\n      .catch(error => console.log(error))\r\n  }, [])\r\n\r\n  const padding = { padding: 5 }\r\n\r\n  const history = createBrowserHistory()\r\n\r\n\r\n\r\n  function addFormArr (form) {\r\n    setForms(forms.concat(form))\r\n  }\r\n\r\n  const { isAuthenticated, loginWithRedirect, logout } = useAuth0();\r\n\r\n  return (\r\n    <div className=\"container-lg\">\r\n      <Router history={history}>\r\n\r\n        <div className=\"col\">\r\n        {!isAuthenticated && (\r\n        <button onClick={() => loginWithRedirect({})}>Log in</button>\r\n      )}\r\n          <Link style={padding} to=\"/table\">Form List</Link>|\r\n          <Link style={padding} to=\"/wizard\">Form Builder</Link>\r\n          <Route path=\"/table\" render={() => <CreateTable forms={forms}/>}/>\r\n          <Route path=\"/wizard\" render={() => <FormWizard forms={forms} setForms={addFormArr}/>}/>\r\n          <Route path=\"/submit/:id\" render={({ match }) => <SubmitPage fields={forms[match.params.id].fields}\r\n                                              formName={forms[match.params.id].name}  id={forms[match.params.id]._id}/>}/>\r\n        </div>\r\n      </Router>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nReactDOM.render(<Router>\r\n<Auth0Provider\r\n    domain={config.domain}\r\n    client_id={config.clientId}\r\n    redirect_uri={window.location.origin}\r\n    onRedirectCallback={onRedirectCallback}\r\n  >\r\n  <App /></Auth0Provider></Router>, document.getElementById('root'))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}
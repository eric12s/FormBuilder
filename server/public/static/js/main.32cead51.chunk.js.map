{"version":3,"sources":["CreateTable.js","services/server_communication.js","SubmitPage.js","FormWizard.js","react-auth0-spa.js","utils/history.js","index.js"],"names":["CreateTable","props","console","log","forms","className","scope","map","item","i","key","name","noSubmissions","to","baseUrl","readAll","axios","get","then","response","data","catch","error","read","id","create","form","post","patch","request","createImpl","formImpl","login","isAuth","SubmitPage","useState","values","fields","handleValueChange","event","onSubmit","preventDefault","target","value","formName","Object","keys","type","inputType","onChange","withRouter","setFields","newLabel","setNewLabel","newName","setNewName","newInputType","setNewInputType","newFormName","setNewFormName","formId","setFormId","field","label","concat","class","Comms","setForms","history","push","DEFAULT_REDIRECT_CALLBACK","window","replaceState","document","title","location","pathname","Auth0Context","React","createContext","createBrowserHistory","ReactDOM","render","children","onRedirectCallback","initOptions","isAuthenticated","setIsAuthenticated","user","setUser","auth0Client","setAuth0","loading","setLoading","popupOpen","setPopupOpen","useEffect","a","createAuth0Client","auth0FromHook","search","includes","handleRedirectCallback","appState","getUser","initAuth0","loginWithPopup","params","Provider","getIdTokenClaims","loginWithRedirect","getTokenSilently","getTokenWithPopup","logout","domain","config","client_id","clientId","redirect_uri","origin","targetUrl","padding","addFormArr","useContext","onClick","style","path","match","_id","getElementById"],"mappings":"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","file":"static/js/main.32cead51.chunk.js","sourcesContent":["//desiging the table\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\n\r\nconst CreateTable = (props) => {\r\n    const getTableRows = () => {\r\n        return props.forms.map((item, i) => {\r\n            return (\r\n                <tbody key={i}>\r\n                    <tr>\r\n                            <td>{i}</td>\r\n                            <td>{item.name}</td>\r\n                            <td>{item.noSubmissions}</td>\r\n                            <td><Link to={`/submit/${i}`}>View</Link></td>\r\n                            <td><Link to={`/submissions/${i}`}>View</Link></td>\r\n                    </tr>\r\n                </tbody>\r\n            )\r\n        })\r\n    }\r\n    \r\n    console.log(props.forms)\r\n    return (\r\n        <div className=\"table table-striped\">\r\n            <table>\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th scope=\"col\">Form Id </th>\r\n                        <th scope=\"col\">Form Name </th>\r\n                        <th scope=\"col\"># Submissions </th>\r\n                        <th scope=\"col\">Submit Page </th>\r\n                        <th scope=\"col\">Submissions Page </th>\r\n                    </tr>\r\n                </thead>\r\n                {getTableRows()}\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateTable","  \r\nimport axios from 'axios'\r\n\r\nconst baseUrl = 'https://form-builder-proj.herokuapp.com'\r\n\r\nfunction readAll() {\r\n  return (\r\n    axios.get(`${baseUrl}/forms`)\r\n      .then(response => response.data)\r\n      .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\nfunction read(id='') {\r\n    return (\r\n      axios.get(`${baseUrl}/forms/${id}`)\r\n        .then(response => response.data)\r\n        .catch(error => console.log(error))\r\n    )\r\n  }\r\n\r\nfunction create(form) {\r\n  return (\r\n    axios.post(`${baseUrl}/forms`, form)\r\n      .then(response => response.data)\r\n      // .catch(error => error)\r\n  )\r\n}\r\n\r\nfunction patch(form) {\r\n  console.log(form)\r\n  return (\r\n    axios.patch(`${baseUrl}/${form.id}`, form)\r\n      .then(request => request.data)\r\n      // .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\nfunction createImpl(formImpl){\r\n  return(\r\n    axios.post(`${baseUrl}/formImpls/`)\r\n    .then(response => response.data)\r\n    .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\nfunction login(isAuth){\r\n  return(\r\n    axios.post(`{baseUrl}/users`)\r\n    .then(response => response.data)\r\n    .catch(error => console.log(error))\r\n  )\r\n}\r\n\r\nexport default {readAll, read, create, patch, createImpl, login}","import React, { useState } from 'react'\r\nimport Comms from './services/server_communication.js'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\n\r\nconst SubmitPage = (props) => {\r\n    const [values, setValues] = useState([''])\r\n    const [inputFields, setInputFields] = useState(props.fields)\r\n    const [count, setCount] = useState(0)\r\n    const formImpl = {}\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        console.log(event.target.value)\r\n        \r\n        const formImpl = {\r\n            id: 5,\r\n            name: \"dfsdf\",\r\n            phone: \"sdfdf\",\r\n            originId: props.id\r\n        }\r\n\r\n        // Comms.createImpl(formImpl)\r\n        // .then((formImpl) => {\r\n        //     console.log(formImpl)\r\n        // }).catch(error => console.log(error))   \r\n    }\r\n\r\n    const handleValueChange = (event) => {\r\n        //setValues(values[count]=event.target.value)\r\n    }\r\n    //adding key\r\n    return( \r\n        <form onSubmit={handleSubmit} className=\"container\">\r\n            <h1>{props.formName}</h1>\r\n                {Object.keys(props.fields).map((i) => {\r\n                    return (\r\n                        <div key={i}>\r\n                            {props.fields[i].name}<input type={props.fields[i].inputType} value={values[i]} onChange={handleValueChange}/>\r\n                        </div>\r\n                    )\r\n                })}\r\n                <button type=\"submit\" className=\"btn btn-primary\">Save</button>\r\n          </form>\r\n    )\r\n\r\n}\r\n\r\nexport default SubmitPage","import React, { useState } from 'react'\r\nimport {\r\n  withRouter\r\n} from 'react-router-dom'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport Comms from './services/server_communication.js'\r\n\r\nconst FormWizard = (props) => {\r\n  const [fields, setFields] = useState([])\r\n  //const [fieldSet, setSet] = useState(new Set())\r\n  const [newLabel, setNewLabel] = useState('')\r\n  const [newName, setNewName] = useState('')\r\n  const [newInputType, setNewInputType] = useState('')\r\n  const [newFormName, setNewFormName] = useState('')\r\n  const [formId, setFormId] = useState(1)\r\n\r\n  // useEffect(() => {\r\n  //     props.setForms(props.forms)\r\n  // }, [props.forms])\r\n\r\n  const addField = (event) => {\r\n    event.preventDefault() // Why? Ask Or\r\n    // if(fieldSet.has(newLabel))\r\n    //    return alert(`${newLabel} is already in exist`) ASK OR\r\n\r\n    const field = { name: newName, label: newLabel, inputType: newInputType || 'text' }\r\n    console.log(newLabel)\r\n    setFields(fields.concat(field))\r\n    //setSet(field.label)\r\n    setNewName('')\r\n    setNewLabel('')\r\n    setNewInputType('')\r\n  }\r\n\r\n  const addForm = (event) => {\r\n    event.preventDefault()\r\n    const form = {\r\n      name: newFormName,\r\n      fields: fields,\r\n      // id: formId,\r\n      noSubmissions: 0\r\n    }\r\n\r\n    Comms.create(form)\r\n      .then((form) => {\r\n        props.setForms(props.forms.concat(form))\r\n        console.log(props.forms)\r\n      }).catch(error => console.log(error))\r\n    setNewFormName('')\r\n    setFields([])\r\n    setFormId(formId + 1)\r\n    props.history.push('/table')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleLabelChange = (event) => {\r\n    setNewLabel(event.target.value)\r\n  }\r\n  const handleInputTypeChange = (event) => {\r\n    setNewInputType(event.target.value)\r\n  }\r\n  const handleFormNameChange = (event) => {\r\n    setNewFormName(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Add new field</h1>\r\n      <form onSubmit={addField} className=\"container\">\r\n        <div class=\"form-group\">\r\n                    field label:<input  type=\"text\" value={newLabel} onChange={handleLabelChange}></input>\r\n                    input name:<input type=\"text\" value={newName} onChange={handleNameChange}></input>\r\n                    input type:<select value={newInputType} onChange={handleInputTypeChange}>\r\n            <option value=\"text\">text</option>\r\n            <option value=\"color\">color</option>\r\n            <option value=\"date\">date</option>\r\n            <option value=\"email\">email</option>\r\n            <option value=\"tel\">telephone</option>\r\n            <option value=\"number\">number</option>\r\n          </select>\r\n          <br></br>\r\n          <button type=\"submit\" className=\"btn btn-primary\">>Add Field</button>\r\n        </div>\r\n      </form>\r\n      <ul className=\"list-group\">\r\n        {fields.map((item, i) => <li key={i} class=\"list-group-item\">{item.label} {item.name} {item.inputType}</li>)}\r\n      </ul>\r\n      <br></br>\r\n      <form onSubmit={addForm}>\r\n        <div class=\"form-group\">\r\n                    Form Name:<input value={newFormName} onChange={handleFormNameChange}></input>\r\n          <br></br>\r\n          <button type=\"submit\" className=\"btn btn-success\">Save</button>\r\n        </div>\r\n      </form>            </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(FormWizard)","// src/react-auth0-spa.js\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\r\n\r\nconst DEFAULT_REDIRECT_CALLBACK = () =>\r\n  window.history.replaceState({}, document.title, window.location.pathname);\r\n\r\nexport const Auth0Context = React.createContext();\r\nexport const useAuth0 = () => useContext(Auth0Context);\r\nexport const Auth0Provider = ({\r\n  children,\r\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\r\n  ...initOptions\r\n}) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState();\r\n  const [user, setUser] = useState();\r\n  const [auth0Client, setAuth0] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initAuth0 = async () => {\r\n      const auth0FromHook = await createAuth0Client(initOptions);\r\n      setAuth0(auth0FromHook);\r\n\r\n      if (window.location.search.includes(\"code=\") &&\r\n          window.location.search.includes(\"state=\")) {\r\n        const { appState } = await auth0FromHook.handleRedirectCallback();\r\n        onRedirectCallback(appState);\r\n      }\r\n\r\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\r\n\r\n      setIsAuthenticated(isAuthenticated);\r\n\r\n      if (isAuthenticated) {\r\n        const user = await auth0FromHook.getUser();\r\n        setUser(user);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n    initAuth0();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const loginWithPopup = async (params = {}) => {\r\n    setPopupOpen(true);\r\n    try {\r\n      await auth0Client.loginWithPopup(params);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setPopupOpen(false);\r\n    }\r\n    const user = await auth0Client.getUser();\r\n    setUser(user);\r\n    setIsAuthenticated(true);\r\n  };\r\n\r\n  const handleRedirectCallback = async () => {\r\n    setLoading(true);\r\n    await auth0Client.handleRedirectCallback();\r\n    const user = await auth0Client.getUser();\r\n    setLoading(false);\r\n    setIsAuthenticated(true);\r\n    setUser(user);\r\n  };\r\n  return (\r\n    <Auth0Context.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        user,\r\n        loading,\r\n        popupOpen,\r\n        loginWithPopup,\r\n        handleRedirectCallback,\r\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\r\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\r\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\r\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\r\n        logout: (...p) => auth0Client.logout(...p)\r\n      }}\r\n    >\r\n      {children}\r\n    </Auth0Context.Provider>\r\n  );\r\n};","import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();","import React, { useState, useEffect } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route, Link\r\n} from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport CreateTable from './CreateTable.js'\r\nimport Comms from './services/server_communication.js'\r\nimport SubmitPage from './SubmitPage'\r\nimport FormWizard from './FormWizard'\r\nimport { useAuth0 } from \"./react-auth0-spa\"\r\nimport { Auth0Provider } from \"./react-auth0-spa\"\r\nimport config from \"./auth_config.json\"\r\nimport history from \"./utils/history\"\r\n\r\nconst onRedirectCallback = appState => {\r\n  history.push(\r\n    appState && appState.targetUrl\r\n      ? appState.targetUrl\r\n      : window.location.pathname\r\n  );\r\n};\r\n\r\nconst bar = (props) =>{\r\n  const padding = { padding: 5 }\r\n    return(\r\n      <div>\r\n    \r\n    <div>You must log in to use the app!</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [forms, setForms] = useState([])\r\n\r\n  useEffect(() => {\r\n    Comms.readAll()\r\n      .then((forms) => {\r\n        setForms(forms)\r\n      })\r\n      .catch(error => console.log(error))\r\n  }, [])\r\n\r\n  \r\n  \r\n  const padding = { padding: 5 }\r\n\r\n  const history = createBrowserHistory()\r\n\r\n\r\n  function addFormArr (form) {\r\n    setForms(forms.concat(form))\r\n  }\r\n\r\n  // const { loading } = useAuth0();\r\n\r\n  // if (loading) {\r\n  //   return <div>Loading...</div>;\r\n  // }\r\n\r\n  const { isAuthenticated, loginWithRedirect, logout } = useAuth0();\r\n\r\n  console.log(isAuthenticated)\r\n  return (\r\n    <div className=\"container-lg\">\r\n      {<button onClick={() => loginWithRedirect({})}>login</button>}\r\n      <Router history={history}>\r\n        <div className=\"col\">\r\n\r\n          {isAuthenticated &&<Link style={padding} to=\"/table\">Form List</Link>|\r\n          <Link style={padding} to=\"/wizard\">Form Builder</Link>}         \r\n          <Route path=\"/table\" render={() => <CreateTable forms={forms}/>}/>\r\n          <Route path=\"/wizard\" render={() => <FormWizard forms={forms} setForms={addFormArr}/>}/>\r\n          <Route path=\"/submit/:id\" render={({ match }) => <SubmitPage fields={forms[match.params.id].fields}\r\n                                              formName={forms[match.params.id].name}  id={forms[match.params.id]._id}/>}/>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nReactDOM.render(<Auth0Provider\r\n  domain={config.domain}\r\n  client_id={config.clientId}\r\n  redirect_uri={window.location.origin}\r\n  onRedirectCallback={onRedirectCallback}\r\n>\r\n<Router><App /></Router>\r\n</Auth0Provider>, document.getElementById('root'))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}